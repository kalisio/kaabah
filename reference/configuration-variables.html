<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration variables | Kaabah</title>
    <meta name="description" content="A Terraform solution to build and operate Docker Swarm infrastructures">
    <link rel="icon" href="https://s3.eu-central-1.amazonaws.com/kalisioscope/kaabah/kaabah-icon-64x64.png">
  <link rel="manifest" href="/kaabah/manifest.json">
    
    <link rel="preload" href="/kaabah/assets/css/0.styles.5f60cd56.css" as="style"><link rel="preload" href="/kaabah/assets/js/app.cdf7ad9f.js" as="script"><link rel="preload" href="/kaabah/assets/js/12.a35635b1.js" as="script"><link rel="prefetch" href="/kaabah/assets/js/10.5b3b7f37.js"><link rel="prefetch" href="/kaabah/assets/js/11.29adf654.js"><link rel="prefetch" href="/kaabah/assets/js/13.d5ce0543.js"><link rel="prefetch" href="/kaabah/assets/js/14.8684b11a.js"><link rel="prefetch" href="/kaabah/assets/js/15.202a4118.js"><link rel="prefetch" href="/kaabah/assets/js/2.3b613cc8.js"><link rel="prefetch" href="/kaabah/assets/js/3.9de83eee.js"><link rel="prefetch" href="/kaabah/assets/js/4.f68da44a.js"><link rel="prefetch" href="/kaabah/assets/js/5.fec3354f.js"><link rel="prefetch" href="/kaabah/assets/js/6.81fa74fa.js"><link rel="prefetch" href="/kaabah/assets/js/7.c23c8004.js"><link rel="prefetch" href="/kaabah/assets/js/8.8d4ab15e.js"><link rel="prefetch" href="/kaabah/assets/js/9.6455eb2a.js">
    <link rel="stylesheet" href="/kaabah/assets/css/0.styles.5f60cd56.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kaabah/" class="home-link router-link-active"><!----> <span class="site-name">Kaabah</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kaabah/about/introduction.html" class="nav-link">About</a></div><div class="nav-item"><a href="/kaabah/guides/understanding-kaabah.html" class="nav-link">Guides</a></div><div class="nav-item"><a href="/kaabah/reference/configuration-variables.html" class="nav-link router-link-exact-active router-link-active">Reference</a></div><div class="nav-item"><a href="/kaabah/tips/" class="nav-link">Tips</a></div><div class="nav-item"><a href="https://github.com/kalisio/kaabah" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kaabah/about/introduction.html" class="nav-link">About</a></div><div class="nav-item"><a href="/kaabah/guides/understanding-kaabah.html" class="nav-link">Guides</a></div><div class="nav-item"><a href="/kaabah/reference/configuration-variables.html" class="nav-link router-link-exact-active router-link-active">Reference</a></div><div class="nav-item"><a href="/kaabah/tips/" class="nav-link">Tips</a></div><div class="nav-item"><a href="https://github.com/kalisio/kaabah" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <p align="center"><a href="https://kalisio.com"><img src="https://s3.eu-central-1.amazonaws.com/kalisioscope/kalisio/kalisio-logo-black-256x84.png"></a> <br> <i><small>Unleashing the potential of spatial information</small></i></p> <ul class="sidebar-links"><li><a href="/kaabah/reference/configuration-variables.html" class="active sidebar-link">Configuration variables</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#providers" class="sidebar-link">Providers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#scaleway" class="sidebar-link">Scaleway</a></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#aws" class="sidebar-link">AWS</a></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#provider" class="sidebar-link">Provider</a></li></ul></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#routing" class="sidebar-link">Routing</a></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#network" class="sidebar-link">Network</a></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#instances" class="sidebar-link">Instances</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#manager" class="sidebar-link">Manager</a></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#workers" class="sidebar-link">Workers</a></li></ul></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#docker" class="sidebar-link">Docker</a></li><li class="sidebar-sub-header"><a href="/kaabah/reference/configuration-variables.html#services" class="sidebar-link">Services</a></li></ul></li><li><a href="/kaabah/reference/helper-commands.html" class="sidebar-link">Helper commands</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="configuration-variables"><a href="#configuration-variables" aria-hidden="true" class="header-anchor">#</a> Configuration variables</h1> <h2 id="providers"><a href="#providers" aria-hidden="true" class="header-anchor">#</a> Providers</h2> <h3 id="scaleway"><a href="#scaleway" aria-hidden="true" class="header-anchor">#</a> Scaleway</h3> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>SCALEWAY_ORGNIZATION</code></td> <td>Your <strong>Scaleway</strong> organization id</td></tr> <tr><td><code>SCALEWAY_TOKEN</code></td> <td>Your <strong>Scaleway</strong> token</td></tr></tbody></table> <h3 id="aws"><a href="#aws" aria-hidden="true" class="header-anchor">#</a> AWS</h3> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>AWS_ACCESS_KEY</code></td> <td>Your <strong>AWS</strong> access key. This is important to note that your credential must allows access to <strong>AWS EC2</strong> and <strong>S3</strong> services</td></tr> <tr><td><code>AWS_SECRET_KEY</code></td> <td>Your <strong>AWS</strong> secret key</td></tr></tbody></table> <h3 id="provider"><a href="#provider" aria-hidden="true" class="header-anchor">#</a> Provider</h3> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>provider</code></td> <td>The provider to host the infrastructure. It must be <code>AWS</code> or <code>Scaleway</code>. There is no default value.</td></tr> <tr><td><code>region</code></td> <td>The region to host the infrastructure. There is no default value.</td></tr> <tr><td><code>availability_zone</code></td> <td>The availability zone to host the infrastructure. This variable is ignored in the case of <strong>Scaleway</strong>. On <strong>AWS</strong>, the default value is set to the first AZ of the specified region. For instance, if you provide the <code>eu-central-1</code> region, the default value will be <code>eu-central-1a</code>.</td></tr></tbody></table> <h2 id="routing"><a href="#routing" aria-hidden="true" class="header-anchor">#</a> Routing</h2> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>domain</code></td> <td>The domain to be added to the traefik rules. There is no default value.</td></tr> <tr><td><code>subdomain</code></td> <td>The subdomain to be added to the traefik rules. By default, the value will be computed from the Terraform workspace name by replacing each <code>-</code> by <code>.</code>. For instance, the subdomain for the workspace <code>app-dev</code> will be <code>app.dev.domain</code></td></tr> <tr><td><code>ca_server</code></td> <td>The <strong>Let's Encrypt</strong> server to generate certificates. The default value is empty to let traefik manage for you. However and because <strong>Let's Encrypt</strong> provides <a href="https://letsencrypt.org/docs/rate-limits/" target="_blank" rel="noopener noreferrer">rate limits<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> it is recommended to set this value to <code>https://acme-staging-v02.api.letsencrypt.org/directory</code> when testing your infrastructure.</td></tr> <tr><td><code>acme_file</code></td> <td>A certificates file if you want to reuse generated certificates. It may be useful to avoid reaching <strong>Let's Encrypt</strong> <a href="https://letsencrypt.org/docs/rate-limits/" target="_blank" rel="noopener noreferrer">rate limits<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> when regenerating an infrastructure. You are responsible of retrieving the <code>acme.json</code> file from the previous infrastructure before deleting it.</td></tr> <tr><td><code>contact</code></td> <td>The email contact provided to Let's Encrypt when generating certificates. The default value is <code>contact@kalisio.com</code></td></tr></tbody></table> <h2 id="network"><a href="#network" aria-hidden="true" class="header-anchor">#</a> Network</h2> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>ssh_user</code></td> <td>The user to get connected to the instances. On <strong>Scaleway</strong> the default value is <code>root</code> and on <strong>AWS</strong> and <strong>OVH</strong> the default value is <code>ubuntu</code>.</td></tr> <tr><td><code>ssh_key</code></td> <td>The path to the the ssh key required to get connected to the instances. There is no default value.</td></tr> <tr><td><code>key_name</code></td> <td>The name of the ssh key to be used when creating the instance. The default value is <code>&quot;&quot;</code>. This variable is ignored for <strong>Scaleway</strong>.</td></tr> <tr><td><code>bastion_ip</code></td> <td>The IP address of the bastion to be used. The default value is the value of the <code>manager_ip</code> variable.</td></tr> <tr><td><code>bastion_ssh_user</code></td> <td>The user to be used to get connected to the bastion. The default value is the value of the <code>ssh_user</code> variable.</td></tr> <tr><td><code>bastion_ssh_key</code></td> <td>The private key to be used to get connected to the bastion. The default value is the value of the <code>ssh_key</code> variable.</td></tr></tbody></table> <h2 id="instances"><a href="#instances" aria-hidden="true" class="header-anchor">#</a> Instances</h2> <p>| <code>rclone_conf</code> | The path to the <strong>rclone</strong> configuration you want to provision on the nodes. The default values is <code>&quot;&quot;</code>. |</p> <h3 id="manager"><a href="#manager" aria-hidden="true" class="header-anchor">#</a> Manager</h3> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>manager_ip</code></td> <td>If define, it represents the IP address to be retrieved and attached to the manager. On <strong>Scaleway</strong> it must be a <a href="https://www.scaleway.com/en/faq/servers/network/#-What-is-a-flexible-IP-address" target="_blank" rel="noopener noreferrer">Flexible IP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and on <strong>AWS</strong> an <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html" target="_blank" rel="noopener noreferrer">Elastic IP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. On <strong>OVH</strong> the variable is omitted because the support of the <a href="https://labs.ovh.com/public-cloud-l3-services" target="_blank" rel="noopener noreferrer">Floating IP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is still experimental. If undefined, the manager is assigned a public IP defined by the providers.</td></tr> <tr><td><code>manager_instance_type</code></td> <td>The instance type of the Docker Swarm manager. It must be a X86 64bits architecture and it depends on the provider. There is no default value.</td></tr> <tr><td><code>manager_labels</code></td> <td>The labels to add to the manager node. Labels are defined using a set of <em>key=value</em> pairs separated with spaces. The default value is <code>&quot;&quot;</code>.</td></tr> <tr><td><code>manager_crontab</code></td> <td>The crontab file to be provisioned on the manger. The default value is <code>&quot;&quot;</code>.</td></tr> <tr><td><code>manager_user_script</code></td> <td>The user script to be executed when when the manager is ready. It must be the file path to the script. The default value is <code>&quot;&quot;</code>.</td></tr></tbody></table> <h3 id="workers"><a href="#workers" aria-hidden="true" class="header-anchor">#</a> Workers</h3> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>worker_instance_type</code></td> <td>The instance type of the Docker Swarm workers. It must be a X86 64bits architecture and it depends on the provider. There is no default value</td></tr> <tr><td><code>worker_instance_count</code></td> <td>The number of worker instances. The default value is <code>1</code></td></tr> <tr><td><code>worker_additional_volume_count</code></td> <td>The number of volumes attached to each worker. The default value is <code>0</code></td></tr> <tr><td><code>worker_additional_volume_size</code></td> <td>The size in giga bytes of the additional volumes. Note that on Scaleway you are limited to 150GB and the minimum size is 50GB. Moreover, you can add volumes to bare-metal instances only. The default value is <code>150</code></td></tr> <tr><td><code>worker_additional_volume_type</code></td> <td>The type of additional volumes to add. This option only works on AWS. The different <a href="https://docs.aws.amazon.com/fr_fr/AWSEC2/latest/UserGuide/EBSVolumeTypes.html" target="_blank" rel="noopener noreferrer">types<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> are <code>gp2</code>, <code>io1</code>, <code>st1</code> and <code>sc1</code>. The default value is <code>sc1</code></td></tr> <tr><td><code>worker_additional_volume_mount_point</code></td> <td>The mount point used to mount the devices. The prefix <code>/dev/</code> is automatically added and the default value is <code>data</code></td></tr> <tr><td><code>worker_labels</code></td> <td>The labels to add to the different worker nodes. Labels are defined using a set of <em>key=value</em> pairs separated with spaces. Labels for each workers are declared using a list, e.g. <code>[&quot;worker0:true&quot;, &quot;worker1:true&quot;, ...]</code>. The default value is <code>[]</code></td></tr> <tr><td><code>worker_user_scripts</code></td> <td>The scripts to be executed once the workers are ready. It must be a list of file paths. The default value is <code>[]</code></td></tr></tbody></table> <h2 id="docker"><a href="#docker" aria-hidden="true" class="header-anchor">#</a> Docker</h2> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>docker_version</code></td> <td>The version of the Docker engine to be installed. The default value is <code>5:19.03.2~3-0~ubuntu-bionic</code></td></tr> <tr><td><code>docker_network</code></td> <td>The name of the Docker network to be created. The default value is <code>kaabah</code></td></tr> <tr><td><code>docker_tls_ca_key</code></td> <td>The path to the CA private key. The default value is <code>ca.key</code></td></tr> <tr><td><code>docker_tls_ca_cert</code></td> <td>The path to the CA public key. The default value is <code>ca.cert</code></td></tr> <tr><td><code>docker_tls_ca_pass</code></td> <td>The path to the CA passphrase file. The default value is <code>ca.pass</code></td></tr></tbody></table> <h2 id="services"><a href="#services" aria-hidden="true" class="header-anchor">#</a> Services</h2> <table><thead><tr><th>Variables</th> <th>Description</th></tr></thead> <tbody><tr><td><code>auth_user</code></td> <td>Your authentication identity to access the services. There is no default value.</td></tr> <tr><td><code>auth_password</code></td> <td>Your authentication password to access the services. It can be encoded in <strong>MD5</strong>, <strong>SHA1</strong> and <strong>BCrypt</strong>: you can use <a href="http://www.htaccesstools.com/htpasswd-generator/" target="_blank" rel="noopener noreferrer">htpasswd<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to generate it. There is no default value.</td></tr> <tr><td><code>slack_webhook_url</code></td> <td>The URL to the slack web hook. The Default value is <code>&quot;&quot;</code>. If you do not provide any value you must override the <strong>AlertManager</strong> configuration through the extensions.</td></tr> <tr><td><code>slack_channel</code></td> <td>The channel or user to send notifications to. Note that you must escape the <code>#</code> character by adding <code>\\</code> before it. The Default value is <code>&quot;\\#alerts&quot;</code>. If you do not provide any value you must override the <strong>AlertManager</strong> configuration through the extensions.</td></tr> <tr><td><code>extensions_dir</code></td> <td>The directory to provision to extend the services. The default value is <code>&quot;&quot;</code>.</td></tr></tbody></table></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/kaabah/reference/helper-commands.html">
          Helper commands
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/kaabah/assets/js/app.cdf7ad9f.js" defer></script><script src="/kaabah/assets/js/12.a35635b1.js" defer></script>
  </body>
</html>
