(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{161:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),a("ol",{attrs:{start:"4"}},[a("li",[t._v("Define the "),a("a",{attrs:{href:"https://www.terraform.io/docs/backends/types/s3.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("S3 backend"),a("OutboundLink")],1),t._v(" properties")])]),t._m(11),t._m(12),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),a("p",[t._v("You must have the credentials set to access the desired bucket on AWS S3 otherwise "),a("strong",[t._v("Terraform")]),t._v(" won't initialize. If needed, follow this "),a("a",{attrs:{href:"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("guide"),a("OutboundLink")],1),t._v(" to set up your credentials.")])]),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),a("p",[t._v("Within your workspace, apply Terraform with your specific configuration:")]),t._m(23),a("p",[t._v("After a while, your cluster should be created and the corresponding Terraform states stored in your S3 backend.")]),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),a("p",[t._v("TODO")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"how-to-use-it"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-it","aria-hidden":"true"}},[this._v("#")]),this._v(" How to use it ?")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"clone-the-github-repository"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clone-the-github-repository","aria-hidden":"true"}},[this._v("#")]),this._v(" Clone the Github repository")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("$ "),e("span",{attrs:{class:"token function"}},[this._v("git")]),this._v(" clone https://github.com/kalisio/kaabah.git\n$ "),e("span",{attrs:{class:"token function"}},[this._v("cd")]),this._v(" kaabah\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"setup-your-terraform-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-your-terraform-environment","aria-hidden":"true"}},[this._v("#")]),this._v(" Setup your Terraform environment")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("Define your Scaleway credentials")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$export")]),t._v(" TF_VAR_SCALEWAY_ACCESS_KEY"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"<ACCESS-KEY>"')]),t._v("\n"),a("span",{attrs:{class:"token variable"}},[t._v("$export")]),t._v(" TF_VAR_SCALEWAY_TOKEN"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"<ACCESS-TOKEN>"')]),t._v(" \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"2"}},[e("li",[this._v("Define your AWS credentials")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$export")]),t._v(" TF_VAR_AWS_ACCESS_KEY"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"<ACCESS-KEY>"')]),t._v("\n"),a("span",{attrs:{class:"token variable"}},[t._v("$export")]),t._v(" TF_VAR_AWS_SECRET_KEY"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"<SECRET-KEY>"')]),t._v(" \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"3"}},[e("li",[this._v("Define your authentication parameters")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token variable"}},[t._v("$export")]),t._v(" TF_VAR_KAABAH_AUTH_USER"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"<AUTH_USER>"')]),t._v("\n"),a("span",{attrs:{class:"token variable"}},[t._v("$export")]),t._v(" TF_VAR_KAABAH_AUTH_PASSWORD"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"<ENCRYPTED_AUTH_PASSWORD>"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Create a file "),e("code",[this._v("backend.config")]),this._v(" with the following properties:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('bucket = "the name of the bucket"\nregion = "the region of the bucket"\nkey    = "the key to the states"\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"5"}},[e("li",[this._v("Initialize Terraform")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token variable"}},[this._v("$terraform")]),this._v(" init -backend-config"),e("span",{attrs:{class:"token operator"}},[this._v("=")]),e("span",{attrs:{class:"token string"}},[this._v('"path/to/your/backend.config"')]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[this._v("#")]),this._v(" Usage")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"create-a-workspace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-workspace","aria-hidden":"true"}},[this._v("#")]),this._v(" Create a workspace")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token variable"}},[this._v("$terraform")]),this._v(" workspace new demo-dev\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Terraform will automatically switch to the created workspace "),e("code",[this._v("demo-dev")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"configure-the-workspace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-workspace","aria-hidden":"true"}},[this._v("#")]),this._v(" Configure the workspace")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We recommend to create a "),e("code",[this._v("tfvars")]),this._v(" file to override the default variables for your workspace. For instance, the "),e("code",[this._v("demo-dev.tfvars")]),this._v(" file may look like this:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('provider = "SCALEWAY"\n\nmanager_instance_type = "t2.nano"\n\nworker_instance_type = "t2.nano"\n\nworker_instance_count = 3\n\nworker_additional_volume_size = 50\n\nworker_additional_volume_count = 2\n\nca_server = "https://acme-staging-v02.api.letsencrypt.org/directory"\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"apply-the-changes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apply-the-changes","aria-hidden":"true"}},[this._v("#")]),this._v(" Apply the changes")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token variable"}},[this._v("$terraform")]),this._v(" apply -var-file demo-dev.tfvars\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"check-the-infrastructure"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#check-the-infrastructure","aria-hidden":"true"}},[this._v("#")]),this._v(" Check the infrastructure")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Get connected to the manager of your infrastructure using "),e("code",[this._v("ssh")]),this._v(" and type the following commands:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("root@app-dev-manager:~"),e("span",{attrs:{class:"token comment"}},[this._v("# docker node ls")]),this._v("\nID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS      ENGINE VERSION\nrwwms640br7eworemnzm71kas *   app-dev-manager    Ready               Active              Leader              18.03.1-ce\ncncd3bj11drznaih0zgsxoi2y     app-dev-worker-1   Ready               Active                                  18.03.1-ce\n4fup9ac9pklv5h81v0o99w40h     app-dev-worker-2   Ready               Active                                  18.03.1-ce\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("root@app-dev-manager:~"),e("span",{attrs:{class:"token comment"}},[this._v("# docker service ls")]),this._v("\nID                  NAME                         MODE                REPLICAS            IMAGE                           PORTS\njwyzwgo2mjyb        services_alertmanager        replicated          1/1                 prom/alertmanager:latest\na35bnom5voa1        services_blackbox-exporter   replicated          1/1                 prom/blackbox-exporter:latest\nsr7c26casj5o        services_cadvisor            global              3/3                 google/cadvisor:latest          *:8081-"),e("span",{attrs:{class:"token operator"}},[this._v(">")]),this._v("8080/tcp\nyp94tsujdftq        services_grafana             replicated          1/1                 grafana/grafana:latest\njql9o8nawlkm        services_node-exporter       global              3/3                 prom/node-exporter:latest\n0jl7slbb6tll        services_portainer           replicated          1/1                 portainer/portainer:latest\nhgeulxbwkex2        services_prometheus          replicated          1/1                 prom/prometheus:latest\nltstocwymexj        services_traefik             replicated          1/1                 traefik:latest\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"deploy-your-application"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploy-your-application","aria-hidden":"true"}},[this._v("#")]),this._v(" Deploy your application")])}],!1,null,null,null);e.default=r.exports}}]);